---
const agendaItems = [
  {
    date: "09/07",
    location: "Centro de Convenciones",
    time: "19:00",
    organizer: "Evento Cultural"
  },
  {
    date: "18/07", 
    location: "Teatro Principal",
    time: "20:30",
    organizer: "Compañía de Teatro"
  },
  {
    date: "12/10",
    location: "Auditorio Municipal",
    time: "18:00", 
    organizer: "Ayuntamiento"
  },
  {
    date: "14/07",
    location: "Plaza Mayor",
    time: "21:00",
    organizer: "Festival de Verano"
  }
];

import drakarisLogo from '../assets/LOGOS/logoblancinegredrakaris.png';
---

<section class="agenda-section">
  <h2 class="agenda-title">AGENDA</h2>
  
  <div class="carousel-container">
    <div class="carousel-track" id="carouselTrack">
      {agendaItems.map((item, index) => (
        <div class="agenda-card" data-index={index} style={`background-image: url(${drakarisLogo.src})`}>
          <div class="date">{item.date}</div>
          <div class="event-details">
            <div class="location">{item.location}</div>
            <div class="time">{item.time}</div>
            <div class="organizer">{item.organizer}</div>
          </div>
        </div>
      ))}
      {/* Duplicate cards for infinite effect */}
      {agendaItems.map((item, index) => (
        <div class="agenda-card" data-index={`duplicate-${index}`} style={`background-image: url(${drakarisLogo.src})`}>
          <div class="date">{item.date}</div>
          <div class="event-details">
            <div class="location">{item.location}</div>
            <div class="time">{item.time}</div>
            <div class="organizer">{item.organizer}</div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .agenda-section {
    background-color: var(--background-color);
    color: white;
    padding: clamp(40px, 8vw, 60px) clamp(1rem, 4vw, 2rem);
    text-align: center;
  }

  .agenda-title {
    font-size: clamp(2rem, 6vw, 3rem);
    font-weight: bold;
    color: var(--title-color);
    margin-bottom: clamp(30px, 6vw, 50px);
    letter-spacing: 2px;
  }

  .carousel-container {
    max-width: 1200px;
    margin: 0 auto;
    overflow: hidden;
    position: relative;
  }

  .carousel-track {
    display: flex;
    transition: transform 0.8s ease-in-out;
    gap: clamp(10px, 3vw, 20px);
  }

  .agenda-card {
    flex: 0 0 clamp(220px, 35vw, 280px);
    background-color: #999;
    color: #000;
    padding: clamp(20px, 4vw, 30px) clamp(15px, 3vw, 20px);
    text-align: center;
    position: relative;
    min-height: clamp(250px, 40vw, 300px);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .agenda-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: inherit;
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    opacity: 0.2;
    z-index: 1;
    margin-bottom: 23px;
  }

  .date {
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: bold;
    margin-bottom: clamp(15px, 3vw, 20px);
    position: relative;
    z-index: 2;
  }

  .event-details {
    display: flex;
    flex-direction: column;
    gap: clamp(4px, 1.5vw, 8px);
    position: relative;
    z-index: 2;
    text-align: center;
  }

  .location {
    font-size: clamp(1rem, 2.5vw, 1.2rem);
    font-weight: bold;
  }

  .time {
    font-size: clamp(0.9rem, 2.2vw, 1.1rem);
    color: #444;
  }

  .organizer {
    font-size: clamp(0.8rem, 2vw, 1rem);
    color: #666;
    font-style: italic;
  }

  @media (max-width: 480px) {
    .agenda-card {
      flex: 0 0 200px;
      min-height: 220px;
    }
    
    .carousel-track {
      gap: 8px;
    }
  }
</style>

<script>
  import { initCarousel } from './utils/carousel.js';
  
  document.addEventListener('DOMContentLoaded', initCarousel);
</script>
